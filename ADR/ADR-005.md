# ADR-005 — Add unit tests for core logic

## Status

Accepted

## Context

Phase 1 had **no tests**.  
The focus was validating the PDF extraction library and building an end-to-end path.

As the project grows in Phase 2 and beyond, we need:

- confidence when refactoring,
- quick feedback for regressions,
- an example of how to test the core logic.

We do not yet aim for high coverage, but we need a **starting point**.

## Decision

We will introduce unit tests for:

1. The word counting logic contained in `countWords` (or its new equivalent in `internal/pdfanalyzer`).
2. Small pieces of PDF analyzer behavior that do not require real HTTP or complex I/O (where feasible).

We will:

- keep tests small and fast,
- use Go’s standard `testing` package,
- add basic `make test` support (already present in the initial Makefile).

## Consequences

### Positive

- Provides a safety net for future refactoring of analysis logic.
- Demonstrates to contributors how to write tests in this project.
- Encourages a testing mindset early, before the architecture becomes more complex.

### Negative

- Requires some extra time to maintain tests when functions change.
- May initially cover only a small portion of the codebase.

## Alternatives considered

1. **Postpone tests until Phase 3**  
   - Rejected: we want to avoid the habit of growing untested code.

2. **Aim for broad test coverage immediately**  
   - Rejected for this phase: the architecture is still evolving, and heavy investment in tests now may cause churn.

---
