

## ðŸ§  `ADR/ADR002.md` â€” Basic package structure


# ADR-002 â€” Introduce basic package structure

## Status

Accepted

## Context

Phase 1 used a single file (`main.go`) containing:

- HTTP server initialization,
- request handling,
- file system handling,
- PDF extraction,
- word counting,
- JSON response building.

This structure worked as a proof-of-concept, but:

- is hard to navigate,
- mixes concerns (HTTP, I/O, parsing, business logic),
- makes reuse and testing harder,
- does not scale as we add more endpoints and features.

We want to improve structure **without jumping directly to a full clean architecture**.

## Decision

We will introduce a minimal internal package structure to separate HTTP responsibilities from PDF analysis:

- `cmd/api/main.go`
  - only bootstraps the HTTP server and wiring.

- `internal/httpapi`
  - contains HTTP handler functions and response helpers.

- `internal/pdfanalyzer`
  - contains PDF text extraction and word-count logic.

This is not yet a full layered architecture, but a **first step away from a single monolithic file**.

## Consequences

### Positive

- Clearer separation of concerns (HTTP vs PDF logic).
- Smaller, more focused files.
- Easier navigation for developers new to the project.
- Easier to write unit tests for PDF-related logic (without starting an HTTP server).
- Prepares the codebase for a more formal architecture in Phase 3.

### Negative

- Slightly more complexity in project structure.
- Developers must understand Go module layout (`cmd/`, `internal/`).
- The separation is still partial and may need further refactoring later.

## Alternatives considered

1. **Keep everything in `main.go` longer**  
   - Rejected: would delay structural clarity and make future refactors more painful.

2. **Jump straight to a full clean/hexagonal architecture**  
   - Rejected in this phase: would introduce too much abstraction too early, before we fully understand usage patterns and needs.

---
