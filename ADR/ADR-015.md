# ADR-015 — Introduce Ports and Adapters

## Status
Accepted

## Context
The application layer must depend on an abstraction, not the concrete PDF library or its implementation.  
Without ports and adapters, changing the PDF library, adding a text-extractor, or using OCR later would require refactoring business code.

## Decision
Create:

### Port (interface)
`internal/app/port/PDFAnalyzerPort`

### Adapter (implementation)
`internal/adapter/pdf/PDFAnalyzerAdapter`

The adapter wraps the existing infrastructure component (`internal/pdfanalyzer`) and maps its output into domain types.

This transforms the system into:

Handler → UseCase → Port → Adapter → Infra (pdf library)


## Consequences

### Positive
- True dependency inversion.
- Easy mocking for tests.
- Infra can evolve or be replaced without breaking business rules.
- Enables multiple analyzer implementations (e.g., "fast mode", "OCR mode").

### Negative
- Requires more files and structural discipline.
- Requires mapping between domain and infra types.

## Alternatives
A) Keep depending directly on `internal/pdfanalyzer`  
Rejected — tight coupling prevents the system from scaling architecturally.

B) Put ports in the domain layer  
Rejected — domain must remain pure and not depend on interfaces required only for orchestration.
