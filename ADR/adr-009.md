
---

# ðŸ§¾ **4. ADR009 â€” Introduce testdata-based testing strategy**

```md
# ADR-009 â€” Introduce testdata-based testing strategy

## Status
Accepted

## Context
We need reliable tests for the PDF analyzer.  
Mocking the PDF library would not validate real-world parsing, and generating
PDFs dynamically adds unnecessary complexity for now.

The Go community convention is to use a `testdata/` folder containing real
fixtures for integration-style tests.

## Decision
Use a `testdata/` directory inside `internal/pdfanalyzer` containing a minimal
and stable PDF file (`simple.pdf`).  
Tests for AnalyzeFile will operate on this real file.

## Consequences

### Positive
- Tests validate real PDF extraction behavior.
- No dependence on mocks or generators.
- Clear and idiomatic Go testing pattern.
- Stable input across development and CI.

### Negative
- Requires storing a binary file in the repo.
- Tests depend on the PDF parsing behavior of the library.

## Alternatives

1) Generate PDF dynamically in tests  
Rejected: increases complexity, requires external libraries, and makes tests slower.

2) Mock pdf.Open  
Rejected: would test our code, but not the library behavior, reducing coverage realism.
